(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{45:function(e,t,n){},53:function(e,t,n){e.exports=n(90)},58:function(e,t,n){},80:function(e,t,n){},83:function(e,t,n){},84:function(e,t,n){},85:function(e,t,n){},86:function(e,t,n){},87:function(e,t,n){},88:function(e,t,n){},89:function(e,t,n){},90:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),s=n(27),c=n.n(s),i=n(3),o=(n(58),n(10)),l=n(20),u=n(24),m=n(21),d=n(25),f=n(16),h=n(17),p=n(22),v=n(23),E=n.n(v),g=function e(){var t=this;Object(o.a)(this,e),this.signup=function(e,n){return t.service.post("/signup",{username:e,password:n}).then((function(e){return e.data}))},this.login=function(e,n){return t.service.post("/login",{username:e,password:n}).then((function(e){return e.data}))},this.loggedin=function(){return t.service.get("/currentuser").then((function(e){return e.data}))},this.logout=function(){return t.service.get("/logout").then((function(e){return e.data})).catch((function(e){return console.log(e)}))},this.service=E.a.create({baseURL:"".concat("https://wherever-eat-takes.herokuapp.com","/auth"),withCredentials:!0})},b=(n(45),function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(u.a)(this,Object(m.a)(t).call(this,e))).handleFormSubmit=function(e){e.preventDefault();var t=n.state,a=t.username,r=t.password;n.validateUsername(a),n.validatePassword(r),n.service.signup(a,r).then((function(e){n.setState({username:"",password:""}),n.props.getUser(e.user),n.props.history.push("/")})).catch((function(e){console.log(e.message),n.setState({username:a,password:r})}))},n.handleChange=function(e){var t=e.target,a=t.name,r=t.value;n.setState(Object(p.a)({},a,r))},n.validateUsername=function(e){e.match(/^\w{3,12}$/)||n.setState(Object(h.a)({},n.state,{invalidUsername:"Invalid username"}))},n.validatePassword=function(e){e.match(/^(?=.*[0-9])(?=.*[a-zA-Z])\w{8,16}$/)||n.setState(Object(h.a)({},n.state,{invalidPassword:"The password must contain from 8 to 16 characters and at least 1 digit and character"}))},n.state={username:"",password:""},n.service=new g,n}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"user-container"},r.a.createElement("div",{className:"user-options"},r.a.createElement("div",{className:"flex"},r.a.createElement("div",{className:"user-option selected"},r.a.createElement(i.b,{className:"link",to:"/signup"},"New here")),r.a.createElement("div",{className:"user-option"},r.a.createElement(i.b,{className:"link",to:"/login"},"Already user")))),r.a.createElement("div",{className:"user-login flex-column"},r.a.createElement("h3",null,"Sign up using your username"),r.a.createElement("form",{className:"signup-form",onSubmit:this.handleFormSubmit},r.a.createElement("div",{className:"flex-column"},r.a.createElement("fieldset",null,r.a.createElement("label",null,"Username:"),r.a.createElement("input",{type:"text",name:"username",placeholder:"userN...",value:this.state.username,onChange:function(t){return e.handleChange(t)}})),r.a.createElement("p",null,this.state.invalidUsername?"".concat(this.state.invalidUsername):""),r.a.createElement("fieldset",null,r.a.createElement("label",null,"Password:"),r.a.createElement("input",{type:"password",name:"password",placeholder:"********",value:this.state.password,onChange:function(t){return e.handleChange(t)}})),r.a.createElement("p",null,this.state.invalidPassword?"".concat(this.state.invalidPassword):"")),r.a.createElement("input",{className:"submit-signup",type:"submit",value:"Sign up"}))))}}]),t}(a.Component)),N=Object(f.h)(b),w=n(12),O=function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(u.a)(this,Object(m.a)(t).call(this,e))).handleFormSubmit=function(e){e.preventDefault();var t=n.state.username,a=n.state.password;n.service.login(t,a).then((function(e){n.setState({username:t,password:a,error:!1}),n.props.getUser(e),n.props.history.goBack()})).catch((function(e){n.setState({username:t,password:a,error:!0})}))},n.handleChange=function(e){var t=e.target,a=t.name,r=t.value;n.setState(Object(p.a)({},a,r))},n.state={username:"",password:""},n.service=new g,n}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"user-container"},r.a.createElement("div",{className:"user-options"},r.a.createElement("div",{className:"flex"},r.a.createElement("div",{className:"user-option"},r.a.createElement(i.b,{className:"link",to:"/signup"},"New here")),r.a.createElement("div",{className:"user-option selected"},r.a.createElement(i.b,{className:"link",to:"/login"},"Already user")))),r.a.createElement("div",{className:"user-login flex-column"},r.a.createElement("h3",null,"Sign In with username"),r.a.createElement("form",{className:"signup-form",onSubmit:this.handleFormSubmit},r.a.createElement("div",{className:"flex-column"},r.a.createElement("fieldset",{className:"flex-column"},r.a.createElement("label",null,"Username:"),r.a.createElement("input",{type:"text",name:"username",value:this.state.username,onChange:function(t){return e.handleChange(t)}})),r.a.createElement("fieldset",{className:"flex-column"},r.a.createElement("label",null,"Password:"),r.a.createElement("input",{type:"password",name:"password",value:this.state.password,onChange:function(t){return e.handleChange(t)}}))),r.a.createElement("input",{className:"submit-signup",type:"submit",value:"Log in"})),r.a.createElement("p",null,this.state.error?"Wrong username or password":"")))}}]),t}(a.Component),j=Object(w.b)((function(e){return{user:e.authentication.user}}))(Object(f.h)(O)),k=(n(80),n(7)),S=n(28),x=n(29),U=n(4),y=n(5);function C(){var e=Object(S.a)(["\n  background: transparent;\n  border: none;\n  cursor: pointer;\n  z-index: 10;\n\n  &:focus {\n    outline: none;\n  }\n\n  @media (min-width: 576px) {\n    display:none\n  }\n\n  div {\n    width: 2rem;\n    height: 0.25rem;\n    background: ",";\n    border-radius: 10px;\n    transition: all 0.3s linear;\n    position: relative;\n    transform-origin: 1px;\n\n    :first-child {\n      transform: ",";\n    }\n\n    :nth-child(2) {\n      opacity: ",";\n      transform: ",";\n    }\n\n    :nth-child(3) {\n      transform: ",";\n    }\n  }\n"]);return C=function(){return e},e}var R=x.a.button(C(),(function(e){return e.open?"#0D0C1D":"#EFFFFA"}),(function(e){return e.open?"rotate(45deg)":"rotate(0)"}),(function(e){return e.open?"0":"1"}),(function(e){return e.open?"translateX(20px)":"translateX(0)"}),(function(e){return e.open?"rotate(-45deg)":"rotate(0)"})),A=function(e){var t=e.open,n=e.setOpen;return r.a.createElement(R,{onClick:function(){return n(!t)}},r.a.createElement(U.a,{icon:y.a,size:"3x"}),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null))};function _(){var e=Object(S.a)(["\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  background: #EFFFFA;\n  transform: ",";\n  height: 100vh;\n  text-align: left;\n  padding: 2rem;\n  position: absolute;\n  top: 0;\n  left: 0;\n  transition: transform 0.3s ease-in-out;\n\n  @media (max-width: 576px) {\n      width: 100%;\n    }\n\n  a {\n    font-size: 2rem;\n    text-transform: uppercase;\n    padding: 2rem 0;\n    font-weight: bold;\n    letter-spacing: 0.5rem;\n    color: #0D0C1D;\n    text-decoration: none;\n    transition: color 0.3s linear;\n\n    @media (max-width: 576px) {\n      font-size: 1.5rem;\n      text-align: center;\n    }\n\n    &:hover {\n      color: #343078;\n    }\n  }\n"]);return _=function(){return e},e}var T=x.a.nav(_(),(function(e){return e.open?"translateX(0)":"translateX(-100%)"})),I=function(e){var t=e.open,n=e.setOpen;return r.a.createElement(T,{open:t,onClick:function(){return n(!t)}},r.a.createElement(i.b,{className:"link",to:"/"},"Home"),r.a.createElement(i.b,{className:"link",to:"/favourites"},"Favourites"),r.a.createElement(i.b,{className:"link",to:"/edit"},"Edit Restaurants"))},F=(n(83),function(e){var t=e.title,n=e.user,a=e.logout,s=r.a.useState(!1),c=Object(k.a)(s,2),o=c[0],l=c[1];return r.a.createElement("nav",{className:"navbar"},r.a.createElement("div",{className:"container"},r.a.createElement(A,{open:o,setOpen:l}),r.a.createElement(I,{open:o,setOpen:l}),r.a.createElement("p",null,t),r.a.createElement("span",{className:"icons"},r.a.createElement(i.b,{className:"link min-width",to:"/"},r.a.createElement(U.a,{icon:y.f,size:"3x"})),r.a.createElement(i.b,{className:"link min-width",to:"/favourites"},r.a.createElement(U.a,{icon:y.j,size:"3x"})),r.a.createElement(i.b,{className:"link min-width",to:"/edit"},r.a.createElement(U.a,{icon:y.g,size:"3x"})),r.a.createElement(i.b,{className:"link",to:"/search"},r.a.createElement(U.a,{icon:y.h,size:"3x"}))),n?r.a.createElement(U.a,{icon:y.i,size:"3x",onClick:a}):r.a.createElement(i.b,{className:"link",to:"/login"},r.a.createElement(U.a,{icon:y.l,size:"3x"}))))}),L=function e(){var t=this;Object(o.a)(this,e),this.getAll=function(){return t.service.get("/restaurants").then((function(e){return e.data}))},this.getOne=function(e){return t.service.get("/restaurant/".concat(e)).then((function(e){return e.data}))},this.newRestaurant=function(e,n,a,r,s,c,i,o){return t.service.post("/new",{name:e,neighborhood:n,photograph:a,location:r,image:s,cuisine_type:c,timetable:i,reviews:o}).then((function(e){return e.data}))},this.removeRestaurant=function(e){return t.service.post("/remove/".concat(e)).then((function(e){return e.data}))},this.editRestaurant=function(e,n,a,r,s,c,i,o,l){return t.service.post("/edit/".concat(e),{name:n,neighborhood:a,photograph:r,location:s,image:c,cuisine_type:i,timetable:o,reviews:l}).then((function(e){return e.data}))},this.service=E.a.create({baseURL:"".concat("https://wherever-eat-takes.herokuapp.com","/restaurants"),withCredentials:!0})},D=function e(){var t=this;Object(o.a)(this,e),this.updateUserLike=function(e){return t.service.post("/updateLike",{updatedUserObj:e}).then((function(e){return e.data}))},this.removeUserLike=function(e){return t.service.post("/removeLike",{restaurant:e}).then((function(e){return e.data}))},this.service=E.a.create({baseURL:"".concat("https://wherever-eat-takes.herokuapp.com","/likes"),withCredentials:!0})},z=(n(84),function(e){var t,n,s=e.user,c=Object(f.g)().restaurantId,i=new L,o=new D,l=Object(f.f)(),u=Object(a.useState)(s),m=Object(k.a)(u,2),d=m[0],h=m[1],p=Object(a.useState)({}),v=Object(k.a)(p,2),E=v[0],g=v[1],b=Object(a.useState)(!0),N=Object(k.a)(b,2),w=N[0],O=N[1],j=Object(a.useState)(!1),S=Object(k.a)(j,2),x=S[0],C=S[1],R=Object(a.useState)(!1),A=Object(k.a)(R,2),_=A[0],T=A[1],I={},F=[];Object(a.useEffect)((function(){i.getOne(c).then((function(e){g(e),d.likes.includes(e.id)?T(!0):T(!1)})).catch((function(e){return console.log(e)}))}),[]),E.reviews&&(I=E.timetable,F=E.reviews),F.length>0&&(t=F.map((function(e){return Object.keys(e).map((function(t){return"_id"!==t?r.a.createElement("div",{className:t+"-review"},e[t]):null}))}))),I&&(n=r.a.createElement("ul",null,Object.keys(I).map((function(e,t){return r.a.createElement("li",{key:t},r.a.createElement("span",null,e+": "),I[e])}))));return E.image?r.a.createElement("div",{className:"container-details"},r.a.createElement("div",{className:"restaurant-name"},E.name),r.a.createElement("div",{className:"image-restaurant"},r.a.createElement("img",{src:"".concat(E.image),alt:"".concat(E.name)})),r.a.createElement("div",{className:"cuisine restaurant-name"},"Cuisine Type: ",E.cuisine_type),r.a.createElement("div",{className:"timetable restaurant-name",onClick:function(){return O(!w)}},"Timetable"," ",w?r.a.createElement(U.a,{icon:y.d}):r.a.createElement(U.a,{icon:y.c}),w?"":n),r.a.createElement("div",{className:"reviews restaurant-name",onClick:function(){return C(!x)}},"Reviews"," ",x?r.a.createElement(U.a,{icon:y.c}):r.a.createElement(U.a,{icon:y.d})),x?r.a.createElement("div",{className:"review-comments"},t):"",r.a.createElement("div",{className:_?"favourite":"restaurant-like unfavourite",onClick:function(){return function(){if(!s)return l.push("/login");d.likes.includes(E.id)?o.removeUserLike(c).then((function(e){s=e,h(e),T(!1)})).catch((function(e){return console.log(e)})):o.updateUserLike(c).then((function(e){s=e,h(e),T(!0)})).catch((function(e){return console.log(e)}))}()}},_?"Marked as Favourite ":"Do you know it? Mark it as favourite "," ",_?r.a.createElement(U.a,{icon:y.b}):r.a.createElement(U.a,{icon:y.e}))):r.a.createElement("div",{className:"content spinner"},r.a.createElement("div",{className:"lds-hourglass"}))}),H="FETCH_DATA_REQUEST",P="FETCH_DATA_SUCCESS",M="FETCH_DATA_ERROR",G="REMOVE_RESTAURANT";function W(){return{type:H}}function X(e){return{type:P,restaurant:e}}function B(e){return{type:M,payload:{error:e}}}var J=new L;n(85);var Q=function(e){var t=e.place;return r.a.createElement("div",{className:"grid-photo-wrap flex"},r.a.createElement(i.b,{to:"/restaurant/".concat(t.id),restaurant:t},t.image?r.a.createElement("img",{src:t.image,alt:t.name,className:"grid-photo"}):r.a.createElement("div",null,t.name)))},$=(n(86),Object(w.b)((function(e){return{restaurants:e.products.restaurants}}))((function(e){var t=e.restaurants;return t[0]?r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"restaurant-grid"},t.map((function(e,t){return r.a.createElement(Q,{key:t,place:e})})))):r.a.createElement("div",{className:"content spinner"},r.a.createElement("div",{className:"lds-hourglass"}))}))),V=(n(87),function(e){var t,n=e.restaurants,s=Object(a.useState)(""),c=Object(k.a)(s,2),i=c[0],o=c[1];return t=n.restaurants.filter((function(e){return e.name.toLowerCase().includes(i.toLowerCase())})),r.a.createElement("div",null,r.a.createElement("input",{type:"text",name:"searchbar",placeholder:"Search restaurants",className:"searchbar",onChange:function(e){return o(e.target.value)}}),r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"restaurant-grid"},t.map((function(e,t){return r.a.createElement(Q,{key:t,place:e})})))))}),Z=(n(88),function(e){var t,n=e.restaurants,s=e.user,c=Object(a.useState)([]),i=Object(k.a)(c,2),o=i[0],l=i[1];return Object(a.useEffect)((function(){var e=[];s&&n.restaurants.filter((function(t){return s.likes.includes(t.id)?e.push(t):[]})),l(e)}),[]),s||(t=r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"no-user flex"},"Log In to see favourite restaurants."))),s&&o.length>0?t=r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"restaurant-grid"},o.map((function(e,t){return r.a.createElement(Q,{key:t,place:e})})))):s&&o.length<=0&&(t=r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"no-user flex"},"No favourite restaurants yet."))),r.a.createElement("div",null,t)}),q=(n(89),{removeRestaurant:function(e){return function(t){t(W()),J.removeRestaurant(e).then((function(e){t(function(e){return{type:G,restaurant:e}}(e)),J.getAll().then((function(e){t(X(e))}),(function(e){t(B(e))}))}),(function(e){t(B(e))}))}}}),K=Object(w.b)((function(e){return{restaurants:e.products.restaurants,loading:e.products.loading,error:e.products.error}}),q)((function(e){var t,n=e.restaurants,s=e.removeRestaurant,c=Object(a.useState)(""),i=Object(k.a)(c,2),o=i[0],l=i[1];return t=n.filter((function(e){return e.name.toLowerCase().includes(o.toLowerCase())})),r.a.createElement("div",{className:"edit-container flex-column"},r.a.createElement("div",{className:"section-1 flex-column"},r.a.createElement("input",{type:"text",name:"searchbar",placeholder:"Search restaurants",className:"searchbar",onChange:function(e){return l(e.target.value)}}),r.a.createElement("div",{className:"flex edit-options"},r.a.createElement("span",null,"Add Restaurant"),r.a.createElement("span",null,"Remove"))),r.a.createElement("div",{className:"section-2"},r.a.createElement("ul",null,t.map((function(e,t){return r.a.createElement("li",{key:t},r.a.createElement("div",{className:"flex button-edit"},e.name," ",r.a.createElement("div",null,r.a.createElement(U.a,{icon:y.g,size:"2x"}),r.a.createElement(U.a,{icon:y.k,size:"2x",onClick:function(){return s(e.id)}}))))})))))})),Y=function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(u.a)(this,Object(m.a)(t).call(this,e))).getUser=function(e){n.setState({loggedInUser:e})},n.logout=function(){n.service.logout().then((function(){n.setState({loggedInUser:null})})).catch((function(e){return console.log(e)}))},n.state={loggedInUser:null},n.service=new g,n.fetchUser(),n}return Object(d.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.props.dispatch((function(e){e(W()),J.getAll().then((function(t){e(X(t))}),(function(t){e(B(t))}))}))}},{key:"fetchUser",value:function(){var e=this;return this.service.loggedin().then((function(t){e.setState({loggedInUser:t})})).catch((function(t){e.setState({loggedInUser:!1})}))}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"App app-container"},r.a.createElement(F,{title:"Wherever Eat Takes",user:this.state.loggedInUser,logout:function(){return e.logout()}}),r.a.createElement("div",{className:"content"},r.a.createElement(f.c,null,r.a.createElement(f.a,{exact:!0,path:"/",render:function(){return r.a.createElement($,{restaurants:e.props,getUser:e.getUser})}}),r.a.createElement(f.a,{exact:!0,path:"/signup",render:function(){return r.a.createElement(N,{getUser:e.getUser})}}),r.a.createElement(f.a,{exact:!0,path:"/login",render:function(){return r.a.createElement(j,{getUser:e.getUser})}}),r.a.createElement(f.a,{exact:!0,path:"/restaurant/:restaurantId",render:function(){return r.a.createElement(z,{user:e.state.loggedInUser})}}),r.a.createElement(f.a,{exact:!0,path:"/search",render:function(){return r.a.createElement(V,{restaurants:e.props,getUser:e.getUser})}}),r.a.createElement(f.a,{exact:!0,path:"/favourites",render:function(){return r.a.createElement(Z,{restaurants:e.props,user:e.state.loggedInUser})}}),r.a.createElement(f.a,{exact:!0,path:"/edit",render:function(){return r.a.createElement(K,null)}}))))}}]),t}(a.Component),ee=Object(w.b)((function(e){return{user:e.products.user,restaurants:e.products.restaurants,loading:e.products.loading,error:e.products.error}}))(Y);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var te=n(18),ne=n(51),ae={restaurants:[],loading:!1,error:null};var re=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ae,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_DATA_REQUEST":return Object(h.a)({},e,{loading:!0,error:null});case"FETCH_DATA_SUCCESS":return Object(h.a)({},e,{loading:!1,restaurants:t.restaurant});case"FETCH_DATA_ERROR":return Object(h.a)({},e,{loading:!1,error:t.payload.error,restaurants:[]});case"REMOVE_RESTAURANT":return Object(h.a)({},e,{loading:!1});default:return e}},se=JSON.parse(localStorage.getItem("user")),ce=se?{loggedIn:!0,user:se}:{};var ie=Object(te.c)({authentication:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ce,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"USERS_LOGIN_REQUEST":return{loggingIn:!0,user:t.user};case"USERS_LOGIN_SUCCESS":return{loggedIn:!0,user:t.user};case"USERS_LOGIN_FAILURE":case"USERS_LOGOUT":return{};default:return e}},products:re}),oe=Object(te.d)(ie,Object(te.a)(ne.a));c.a.render(r.a.createElement(w.a,{store:oe},r.a.createElement(i.a,null,r.a.createElement(ee,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[53,1,2]]]);
//# sourceMappingURL=main.3ff74762.chunk.js.map