(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{45:function(e,t,n){},53:function(e,t,n){e.exports=n(89)},58:function(e,t,n){},80:function(e,t,n){},83:function(e,t,n){},84:function(e,t,n){},85:function(e,t,n){},86:function(e,t,n){},87:function(e,t,n){},88:function(e,t,n){},89:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),s=n(27),c=n.n(s),i=n(3),o=(n(58),n(10)),l=n(20),u=n(24),m=n(21),d=n(25),h=n(16),f=n(18),p=n(22),v=n(23),g=n.n(v),E=function e(){var t=this;Object(o.a)(this,e),this.signup=function(e,n){return t.service.post("/signup",{username:e,password:n}).then((function(e){return e.data}))},this.login=function(e,n){return t.service.post("/login",{username:e,password:n}).then((function(e){return e.data}))},this.loggedin=function(){return t.service.get("/currentuser").then((function(e){return e.data}))},this.logout=function(){return t.service.get("/logout").then((function(e){return e.data})).catch((function(e){return console.log(e)}))},this.service=g.a.create({baseURL:"http://localhost:5000/auth",withCredentials:!0})},b=(n(45),function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(u.a)(this,Object(m.a)(t).call(this,e))).handleFormSubmit=function(e){e.preventDefault();var t=n.state,a=t.username,r=t.password;n.validateUsername(a),n.validatePassword(r),n.service.signup(a,r).then((function(e){n.setState({username:"",password:""}),n.props.getUser(e.user),n.props.history.push("/")})).catch((function(e){console.log(e.message),n.setState({username:a,password:r})}))},n.handleChange=function(e){var t=e.target,a=t.name,r=t.value;n.setState(Object(p.a)({},a,r))},n.validateUsername=function(e){e.match(/^\w{3,12}$/)||n.setState(Object(f.a)({},n.state,{invalidUsername:"Invalid username"}))},n.validatePassword=function(e){e.match(/^(?=.*[0-9])(?=.*[a-zA-Z])\w{8,16}$/)||n.setState(Object(f.a)({},n.state,{invalidPassword:"The password must contain from 8 to 16 characters and at least 1 digit and character"}))},n.state={username:"",password:""},n.service=new E,n}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"user-container"},r.a.createElement("div",{className:"user-options"},r.a.createElement("div",{className:"flex"},r.a.createElement("div",{className:"user-option selected"},r.a.createElement(i.b,{className:"link",to:"/signup"},"New here")),r.a.createElement("div",{className:"user-option"},r.a.createElement(i.b,{className:"link",to:"/login"},"Already user")))),r.a.createElement("div",{className:"user-login flex-column"},r.a.createElement("h3",null,"Sign up using your username"),r.a.createElement("form",{className:"signup-form",onSubmit:this.handleFormSubmit},r.a.createElement("div",{className:"flex-column"},r.a.createElement("fieldset",null,r.a.createElement("label",null,"Username:"),r.a.createElement("input",{type:"text",name:"username",placeholder:"userN...",value:this.state.username,onChange:function(t){return e.handleChange(t)}})),r.a.createElement("p",null,this.state.invalidUsername?"".concat(this.state.invalidUsername):""),r.a.createElement("fieldset",null,r.a.createElement("label",null,"Password:"),r.a.createElement("input",{type:"password",name:"password",placeholder:"********",value:this.state.password,onChange:function(t){return e.handleChange(t)}})),r.a.createElement("p",null,this.state.invalidPassword?"".concat(this.state.invalidPassword):"")),r.a.createElement("input",{className:"submit-signup",type:"submit",value:"Sign up"}))))}}]),t}(a.Component)),O=Object(h.h)(b),w=n(12),N="FETCH_DATA_REQUEST",j="FETCH_DATA_SUCCESS",S="FETCH_DATA_ERROR";function k(){return{type:N}}function U(e){return{type:j,restaurant:e}}function x(e){return{type:S,payload:{error:e}}}var y=function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(u.a)(this,Object(m.a)(t).call(this,e))).handleFormSubmit=function(e){e.preventDefault();var t=n.state.username,a=n.state.password;n.service.login(t,a).then((function(e){n.setState({username:t,password:a,error:!1}),n.props.getUser(e),n.props.history.goBack()})).catch((function(e){n.setState({username:t,password:a,error:!0})}))},n.handleChange=function(e){var t=e.target,a=t.name,r=t.value;n.setState(Object(p.a)({},a,r))},n.state={username:"",password:""},n.service=new E,n}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"user-container"},r.a.createElement("div",{className:"user-options"},r.a.createElement("div",{className:"flex"},r.a.createElement("div",{className:"user-option"},r.a.createElement(i.b,{className:"link",to:"/signup"},"New here")),r.a.createElement("div",{className:"user-option selected"},r.a.createElement(i.b,{className:"link",to:"/login"},"Already user")))),r.a.createElement("div",{className:"user-login flex-column"},r.a.createElement("h3",null,"Sign In with username"),r.a.createElement("form",{className:"signup-form",onSubmit:this.handleFormSubmit},r.a.createElement("div",{className:"flex-column"},r.a.createElement("fieldset",{className:"flex-column"},r.a.createElement("label",null,"Username:"),r.a.createElement("input",{type:"text",name:"username",value:this.state.username,onChange:function(t){return e.handleChange(t)}})),r.a.createElement("fieldset",{className:"flex-column"},r.a.createElement("label",null,"Password:"),r.a.createElement("input",{type:"password",name:"password",value:this.state.password,onChange:function(t){return e.handleChange(t)}}))),r.a.createElement("input",{className:"submit-signup",type:"submit",value:"Log in"})),r.a.createElement("p",null,this.state.error?"Wrong username or password":"")))}}]),t}(a.Component),C=Object(w.b)((function(e){return{user:e.authentication.user}}))(Object(h.h)(y)),_=(n(80),n(7)),I=n(28),R=n(29),A=n(4),F=n(5);function L(){var e=Object(I.a)(["\n  background: transparent;\n  border: none;\n  cursor: pointer;\n  z-index: 10;\n\n  &:focus {\n    outline: none;\n  }\n\n  @media (min-width: 576px) {\n    display:none\n  }\n\n  div {\n    width: 2rem;\n    height: 0.25rem;\n    background: ",";\n    border-radius: 10px;\n    transition: all 0.3s linear;\n    position: relative;\n    transform-origin: 1px;\n\n    :first-child {\n      transform: ",";\n    }\n\n    :nth-child(2) {\n      opacity: ",";\n      transform: ",";\n    }\n\n    :nth-child(3) {\n      transform: ",";\n    }\n  }\n"]);return L=function(){return e},e}var T=R.a.button(L(),(function(e){return e.open?"#0D0C1D":"#EFFFFA"}),(function(e){return e.open?"rotate(45deg)":"rotate(0)"}),(function(e){return e.open?"0":"1"}),(function(e){return e.open?"translateX(20px)":"translateX(0)"}),(function(e){return e.open?"rotate(-45deg)":"rotate(0)"})),D=function(e){var t=e.open,n=e.setOpen;return r.a.createElement(T,{onClick:function(){return n(!t)}},r.a.createElement(A.a,{icon:F.a,size:"3x"}),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null))};function z(){var e=Object(I.a)(["\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  background: #EFFFFA;\n  transform: ",";\n  height: 100vh;\n  text-align: left;\n  padding: 2rem;\n  position: absolute;\n  top: 0;\n  left: 0;\n  transition: transform 0.3s ease-in-out;\n\n  @media (max-width: 576px) {\n      width: 100%;\n    }\n\n  a {\n    font-size: 2rem;\n    text-transform: uppercase;\n    padding: 2rem 0;\n    font-weight: bold;\n    letter-spacing: 0.5rem;\n    color: #0D0C1D;\n    text-decoration: none;\n    transition: color 0.3s linear;\n\n    @media (max-width: 576px) {\n      font-size: 1.5rem;\n      text-align: center;\n    }\n\n    &:hover {\n      color: #343078;\n    }\n  }\n"]);return z=function(){return e},e}var H=R.a.nav(z(),(function(e){return e.open?"translateX(0)":"translateX(-100%)"})),P=function(e){var t=e.open,n=e.setOpen;return r.a.createElement(H,{open:t,onClick:function(){return n(!t)}},r.a.createElement(i.b,{className:"link",to:"/"},"Home"),r.a.createElement(i.b,{className:"link",to:"/favourites"},"Favourites"),r.a.createElement(i.b,{className:"link",to:"/edit"},"Edit Restaurants"))},G=(n(83),function(e){var t=e.title,n=e.user,a=e.logout,s=r.a.useState(!1),c=Object(_.a)(s,2),o=c[0],l=c[1];return r.a.createElement("nav",{className:"navbar"},r.a.createElement("div",{className:"container"},r.a.createElement(D,{open:o,setOpen:l}),r.a.createElement(P,{open:o,setOpen:l}),r.a.createElement("p",null,t),r.a.createElement("span",{className:"icons"},r.a.createElement(i.b,{className:"link min-width",to:"/"},r.a.createElement(A.a,{icon:F.f,size:"3x"})),r.a.createElement(i.b,{className:"link min-width",to:"/favourites"},r.a.createElement(A.a,{icon:F.i,size:"3x"})),r.a.createElement(i.b,{className:"link",to:"/search"},r.a.createElement(A.a,{icon:F.g,size:"3x"}))),n?r.a.createElement(A.a,{icon:F.h,size:"3x",onClick:a}):r.a.createElement(i.b,{className:"link",to:"/login"},r.a.createElement(A.a,{icon:F.j,size:"3x"}))))}),W=function e(){var t=this;Object(o.a)(this,e),this.getAll=function(){return t.service.get("/restaurants").then((function(e){return e.data}))},this.getOne=function(e){return t.service.get("/restaurant/".concat(e)).then((function(e){return e.data}))},this.newRestaurant=function(e,n,a,r,s,c,i,o){return t.service.post("/new",{name:e,neighborhood:n,photograph:a,location:r,image:s,cuisine_type:c,timetable:i,reviews:o}).then((function(e){return e.data}))},this.removeRestaurant=function(e){return t.service.post("/remove",{restaurant:e}).then((function(e){return e.data}))},this.editRestaurant=function(e,n,a,r,s,c,i,o,l){return t.service.post("/edit/".concat(e),{name:n,neighborhood:a,photograph:r,location:s,image:c,cuisine_type:i,timetable:o,reviews:l}).then((function(e){return e.data}))},this.service=g.a.create({baseURL:"".concat("http://localhost:5000","/restaurants"),withCredentials:!0})},X=function e(){var t=this;Object(o.a)(this,e),this.updateUserLike=function(e){return t.service.post("/updateLike",{updatedUserObj:e}).then((function(e){return e.data}))},this.removeUserLike=function(e){return t.service.post("/removeLike",{restaurant:e}).then((function(e){return e.data}))},this.service=g.a.create({baseURL:"http://localhost:5000/likes",withCredentials:!0})},B=(n(84),function(e){var t,n,s=e.user,c=(e.props,Object(h.g)().restaurantId),i=new W,o=new X,l=Object(h.f)(),u=Object(a.useState)(s),m=Object(_.a)(u,2),d=m[0],f=m[1],p=Object(a.useState)({}),v=Object(_.a)(p,2),g=v[0],E=v[1],b=Object(a.useState)(!0),O=Object(_.a)(b,2),w=O[0],N=O[1],j=Object(a.useState)(!1),S=Object(_.a)(j,2),k=S[0],U=S[1],x=Object(a.useState)(!1),y=Object(_.a)(x,2),C=y[0],I=y[1],R={},L=[];Object(a.useEffect)((function(){i.getOne(c).then((function(e){E(e),d.likes.includes(e.id)?I(!0):I(!1)})).catch((function(e){return console.log(e)}))}),[]),g.timetable&&(R=g.timetable,L=g.reviews),L.length>0&&(t=L.map((function(e){return Object.keys(e).map((function(t){if("_id"!=t)return r.a.createElement("div",{className:t+"-review"},e[t])}))}))),n=r.a.createElement("ul",null,Object.keys(R).map((function(e){return r.a.createElement("li",null,r.a.createElement("span",null,e+": "),R[e])})));return g?r.a.createElement("div",{className:"container-details"},r.a.createElement("div",{className:"restaurant-name"},g.name),r.a.createElement("div",{className:"image-restaurant"},r.a.createElement("img",{src:"".concat(g.image),alt:"".concat(g.name)})),r.a.createElement("div",{className:"cuisine restaurant-name"},"Cuisine Type: ",g.cuisine_type),r.a.createElement("div",{className:"timetable restaurant-name",onClick:function(){return N(!w)}},"Timetable"," ",w?r.a.createElement(A.a,{icon:F.d}):r.a.createElement(A.a,{icon:F.c}),w?"":n),r.a.createElement("div",{className:"reviews restaurant-name",onClick:function(){return U(!k)}},"Reviews"," ",k?r.a.createElement(A.a,{icon:F.c}):r.a.createElement(A.a,{icon:F.d})),k?r.a.createElement("div",{className:"review-comments"},t):"",r.a.createElement("div",{className:C?"favourite":"restaurant-like unfavourite",onClick:function(){return function(){if(!s)return l.push("/login");d.likes.includes(g.id)?o.removeUserLike(c).then((function(e){s=e,f(e),I(!1)})).catch((function(e){return console.log(e)})):o.updateUserLike(c).then((function(e){s=e,f(e),I(!0)})).catch((function(e){return console.log(e)}))}()}},C?"Marked as Favourite ":"Do you know it? Mark it as favourite "," ",C?r.a.createElement(A.a,{icon:F.b}):r.a.createElement(A.a,{icon:F.e}))):r.a.createElement("div",{className:"spinner"},r.a.createElement("div",{class:"lds-hourglass"}))}),J=new W;n(85);var M=function(e){var t=e.place;return r.a.createElement("div",{className:"grid-photo-wrap flex"},r.a.createElement(i.b,{to:"/restaurant/".concat(t.id),restaurant:t},t.image?r.a.createElement("img",{src:t.image,alt:t.name,className:"grid-photo"}):r.a.createElement("div",null,t.name)))},Q=(n(86),Object(w.b)((function(e){return{restaurants:e.products.restaurants}}))((function(e){var t=e.restaurants;return r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"restaurant-grid"},t.map((function(e,t){return r.a.createElement(M,{key:t,place:e})}))))}))),$=(n(87),function(e){var t,n=e.restaurants,s=Object(a.useState)(""),c=Object(_.a)(s,2),i=c[0],o=c[1];return t=n.restaurants.filter((function(e){return e.name.toLowerCase().includes(i.toLowerCase())})),r.a.createElement("div",null,r.a.createElement("input",{type:"text",name:"searchbar",placeholder:"Search restaurants",className:"searchbar",onChange:function(e){return o(e.target.value)}}),r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"restaurant-grid"},t.map((function(e,t){return r.a.createElement(M,{key:t,place:e})})))))}),Z=(n(88),function(e){var t,n=e.restaurants,s=e.user,c=Object(a.useState)([]),i=Object(_.a)(c,2),o=i[0],l=i[1],u=[];return s&&(u=n.restaurants.filter((function(e){if(s.likes.includes(e.id))return e}))),Object(a.useEffect)((function(){l(u)}),[]),s||(t=r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"no-user flex"},"Log In to see favourite restaurants."))),s&&o.length>0?t=r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"restaurant-grid"},o.map((function(e,t){return r.a.createElement(M,{key:t,place:e})})))):s&&o.length<=0&&(t=r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"no-user flex"},"No favourite restaurants yet."))),r.a.createElement("div",null,t)}),q=Object(w.b)((function(e){return{restaurants:e.products.restaurants,loading:e.products.loading,error:e.products.error}}))((function(e){var t,n=e.restaurants,s=Object(a.useState)(""),c=Object(_.a)(s,2),i=c[0],o=c[1];return t=n.filter((function(e){return e.name.toLowerCase().includes(i.toLowerCase())})),r.a.createElement("div",{className:"container"},r.a.createElement("input",{type:"text",name:"searchbar",placeholder:"Search restaurants",className:"searchbar",onChange:function(e){return o(e.target.value)}}),r.a.createElement("ul",null,t.map((function(e,t){return r.a.createElement("li",{key:t},e.name)}))))})),K=function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(u.a)(this,Object(m.a)(t).call(this,e))).getUser=function(e){n.setState({loggedInUser:e})},n.logout=function(){n.service.logout().then((function(){n.setState({loggedInUser:null})})).catch((function(e){return console.log(e)}))},n.state={loggedInUser:null},n.service=new E,n.fetchUser(),n}return Object(d.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.props.dispatch((function(e){e(k()),J.getAll().then((function(t){e(U(t))}),(function(t){e(x(t))}))}))}},{key:"fetchUser",value:function(){var e=this;return this.service.loggedin().then((function(t){e.setState({loggedInUser:t})})).catch((function(t){e.setState({loggedInUser:!1})}))}},{key:"render",value:function(){var e=this;return this.props.restaurants?r.a.createElement("div",{className:"App app-container"},r.a.createElement(G,{title:"Wherever Eat Takes",user:this.state.loggedInUser,logout:function(){return e.logout()}}),r.a.createElement("div",{className:"content"},r.a.createElement(h.c,null,r.a.createElement(h.a,{exact:!0,path:"/",render:function(){return r.a.createElement(Q,{restaurants:e.props,getUser:e.getUser})}}),r.a.createElement(h.a,{exact:!0,path:"/signup",render:function(){return r.a.createElement(O,{getUser:e.getUser})}}),r.a.createElement(h.a,{exact:!0,path:"/login",render:function(){return r.a.createElement(C,{getUser:e.getUser})}}),r.a.createElement(h.a,{exact:!0,path:"/restaurant/:restaurantId",render:function(){return r.a.createElement(B,{user:e.state.loggedInUser})}}),r.a.createElement(h.a,{exact:!0,path:"/search",render:function(){return r.a.createElement($,{restaurants:e.props,getUser:e.getUser})}}),r.a.createElement(h.a,{exact:!0,path:"/favourites",render:function(){return r.a.createElement(Z,{restaurants:e.props,user:e.state.loggedInUser})}}),r.a.createElement(h.a,{exact:!0,path:"/edit",render:function(){return r.a.createElement(q,null)}})))):r.a.createElement("div",{className:"spinner"},r.a.createElement("div",{class:"lds-hourglass"}))}}]),t}(a.Component),V=Object(w.b)((function(e){return{user:e.products.user,restaurants:e.products.restaurants,loading:e.products.loading,error:e.products.error}}))(K);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Y=n(17),ee=n(51),te={restaurants:[],loading:!1,error:null};var ne=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:te,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_DATA_REQUEST":return Object(f.a)({},e,{loading:!0,error:null});case"FETCH_DATA_SUCCESS":return Object(f.a)({},e,{loading:!1,restaurants:t.restaurant});case"FETCH_DATA_ERROR":return Object(f.a)({},e,{loading:!1,error:t.payload.error,restaurants:[]});default:return e}},ae=JSON.parse(localStorage.getItem("user")),re=ae?{loggedIn:!0,user:ae}:{};var se=Object(Y.c)({authentication:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:re,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"USERS_LOGIN_REQUEST":return{loggingIn:!0,user:t.user};case"USERS_LOGIN_SUCCESS":return{loggedIn:!0,user:t.user};case"USERS_LOGIN_FAILURE":case"USERS_LOGOUT":return{};default:return e}},products:ne}),ce=Object(Y.d)(se,Object(Y.a)(ee.a));c.a.render(r.a.createElement(w.a,{store:ce},r.a.createElement(i.a,null,r.a.createElement(V,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[53,1,2]]]);
//# sourceMappingURL=main.d238e243.chunk.js.map