(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{45:function(e,t,n){},53:function(e,t,n){e.exports=n(89)},58:function(e,t,n){},80:function(e,t,n){},83:function(e,t,n){},84:function(e,t,n){},85:function(e,t,n){},86:function(e,t,n){},87:function(e,t,n){},88:function(e,t,n){},89:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),s=n(27),c=n.n(s),i=n(3),o=(n(58),n(10)),u=n(20),l=n(24),m=n(21),d=n(25),h=n(16),p=n(18),f=n(22),v=n(23),g=n.n(v),E=function e(){var t=this;Object(o.a)(this,e),this.signup=function(e,n){return t.service.post("/signup",{username:e,password:n}).then((function(e){return e.data}))},this.login=function(e,n){return t.service.post("/login",{username:e,password:n}).then((function(e){return e.data}))},this.loggedin=function(){return t.service.get("/currentuser").then((function(e){return e.data}))},this.logout=function(){return t.service.get("/logout").then((function(e){return e.data})).catch((function(e){return console.log(e)}))},this.service=g.a.create({baseURL:"".concat("https://wherever-eat-takes.herokuapp.com","/auth"),withCredentials:!0})},b=(n(45),function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(l.a)(this,Object(m.a)(t).call(this,e))).handleFormSubmit=function(e){e.preventDefault();var t=n.state,a=t.username,r=t.password;n.validateUsername(a),n.validatePassword(r),n.service.signup(a,r).then((function(e){n.setState({username:"",password:""}),n.props.getUser(e.user),n.props.history.push("/")})).catch((function(e){console.log(e.message),n.setState({username:a,password:r})}))},n.handleChange=function(e){var t=e.target,a=t.name,r=t.value;n.setState(Object(f.a)({},a,r))},n.validateUsername=function(e){e.match(/^\w{3,12}$/)||n.setState(Object(p.a)({},n.state,{invalidUsername:"Invalid username"}))},n.validatePassword=function(e){e.match(/^(?=.*[0-9])(?=.*[a-zA-Z])\w{8,16}$/)||n.setState(Object(p.a)({},n.state,{invalidPassword:"The password must contain from 8 to 16 characters and at least 1 digit and character"}))},n.state={username:"",password:""},n.service=new E,n}return Object(d.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"user-container"},r.a.createElement("div",{className:"user-options"},r.a.createElement("div",{className:"flex"},r.a.createElement("div",{className:"user-option selected"},r.a.createElement(i.b,{className:"link",to:"/signup"},"New here")),r.a.createElement("div",{className:"user-option"},r.a.createElement(i.b,{className:"link",to:"/login"},"Already user")))),r.a.createElement("div",{className:"user-login flex-column"},r.a.createElement("h3",null,"Sign up using your username"),r.a.createElement("form",{className:"signup-form",onSubmit:this.handleFormSubmit},r.a.createElement("div",{className:"flex-column"},r.a.createElement("fieldset",null,r.a.createElement("label",null,"Username:"),r.a.createElement("input",{type:"text",name:"username",placeholder:"userN...",value:this.state.username,onChange:function(t){return e.handleChange(t)}})),r.a.createElement("p",null,this.state.invalidUsername?"".concat(this.state.invalidUsername):""),r.a.createElement("fieldset",null,r.a.createElement("label",null,"Password:"),r.a.createElement("input",{type:"password",name:"password",placeholder:"********",value:this.state.password,onChange:function(t){return e.handleChange(t)}})),r.a.createElement("p",null,this.state.invalidPassword?"".concat(this.state.invalidPassword):"")),r.a.createElement("input",{className:"submit-signup",type:"submit",value:"Sign up"}))))}}]),t}(a.Component)),w=Object(h.h)(b),O=n(12),N=function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(l.a)(this,Object(m.a)(t).call(this,e))).handleFormSubmit=function(e){e.preventDefault();var t=n.state.username,a=n.state.password;n.service.login(t,a).then((function(e){n.setState({username:t,password:a,error:!1}),n.props.getUser(e),n.props.history.goBack()})).catch((function(e){n.setState({username:t,password:a,error:!0})}))},n.handleChange=function(e){var t=e.target,a=t.name,r=t.value;n.setState(Object(f.a)({},a,r))},n.state={username:"",password:""},n.service=new E,n}return Object(d.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"user-container"},r.a.createElement("div",{className:"user-options"},r.a.createElement("div",{className:"flex"},r.a.createElement("div",{className:"user-option"},r.a.createElement(i.b,{className:"link",to:"/signup"},"New here")),r.a.createElement("div",{className:"user-option selected"},r.a.createElement(i.b,{className:"link",to:"/login"},"Already user")))),r.a.createElement("div",{className:"user-login flex-column"},r.a.createElement("h3",null,"Sign In with username"),r.a.createElement("form",{className:"signup-form",onSubmit:this.handleFormSubmit},r.a.createElement("div",{className:"flex-column"},r.a.createElement("fieldset",{className:"flex-column"},r.a.createElement("label",null,"Username:"),r.a.createElement("input",{type:"text",name:"username",value:this.state.username,onChange:function(t){return e.handleChange(t)}})),r.a.createElement("fieldset",{className:"flex-column"},r.a.createElement("label",null,"Password:"),r.a.createElement("input",{type:"password",name:"password",value:this.state.password,onChange:function(t){return e.handleChange(t)}}))),r.a.createElement("input",{className:"submit-signup",type:"submit",value:"Log in"})),r.a.createElement("p",null,this.state.error?"Wrong username or password":"")))}}]),t}(a.Component),j=Object(O.b)((function(e){return{user:e.authentication.user}}))(Object(h.h)(N)),k=(n(80),n(7)),S=n(28),U=n(29),x=n(4),y=n(5);function C(){var e=Object(S.a)(["\n  background: transparent;\n  border: none;\n  cursor: pointer;\n  z-index: 10;\n\n  &:focus {\n    outline: none;\n  }\n\n  @media (min-width: 576px) {\n    display:none\n  }\n\n  div {\n    width: 2rem;\n    height: 0.25rem;\n    background: ",";\n    border-radius: 10px;\n    transition: all 0.3s linear;\n    position: relative;\n    transform-origin: 1px;\n\n    :first-child {\n      transform: ",";\n    }\n\n    :nth-child(2) {\n      opacity: ",";\n      transform: ",";\n    }\n\n    :nth-child(3) {\n      transform: ",";\n    }\n  }\n"]);return C=function(){return e},e}var _=U.a.button(C(),(function(e){return e.open?"#0D0C1D":"#EFFFFA"}),(function(e){return e.open?"rotate(45deg)":"rotate(0)"}),(function(e){return e.open?"0":"1"}),(function(e){return e.open?"translateX(20px)":"translateX(0)"}),(function(e){return e.open?"rotate(-45deg)":"rotate(0)"})),I=function(e){var t=e.open,n=e.setOpen;return r.a.createElement(_,{onClick:function(){return n(!t)}},r.a.createElement(x.a,{icon:y.a,size:"3x"}),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null))};function R(){var e=Object(S.a)(["\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  background: #EFFFFA;\n  transform: ",";\n  height: 100vh;\n  text-align: left;\n  padding: 2rem;\n  position: absolute;\n  top: 0;\n  left: 0;\n  transition: transform 0.3s ease-in-out;\n\n  @media (max-width: 576px) {\n      width: 100%;\n    }\n\n  a {\n    font-size: 2rem;\n    text-transform: uppercase;\n    padding: 2rem 0;\n    font-weight: bold;\n    letter-spacing: 0.5rem;\n    color: #0D0C1D;\n    text-decoration: none;\n    transition: color 0.3s linear;\n\n    @media (max-width: 576px) {\n      font-size: 1.5rem;\n      text-align: center;\n    }\n\n    &:hover {\n      color: #343078;\n    }\n  }\n"]);return R=function(){return e},e}var A=U.a.nav(R(),(function(e){return e.open?"translateX(0)":"translateX(-100%)"})),F=function(e){var t=e.open,n=e.setOpen;return r.a.createElement(A,{open:t,onClick:function(){return n(!t)}},r.a.createElement(i.b,{className:"link",to:"/"},"Home"),r.a.createElement(i.b,{className:"link",to:"/favourites"},"Favourites"),r.a.createElement(i.b,{className:"link",to:"/edit"},"Edit Restaurants"))},L=(n(83),function(e){var t=e.title,n=e.user,a=e.logout,s=r.a.useState(!1),c=Object(k.a)(s,2),o=c[0],u=c[1];return r.a.createElement("nav",{className:"navbar"},r.a.createElement("div",{className:"container"},r.a.createElement(I,{open:o,setOpen:u}),r.a.createElement(F,{open:o,setOpen:u}),r.a.createElement("p",null,t),r.a.createElement("span",{className:"icons"},r.a.createElement(i.b,{className:"link min-width",to:"/"},r.a.createElement(x.a,{icon:y.f,size:"3x"})),r.a.createElement(i.b,{className:"link min-width",to:"/favourites"},r.a.createElement(x.a,{icon:y.i,size:"3x"})),r.a.createElement(i.b,{className:"link",to:"/search"},r.a.createElement(x.a,{icon:y.g,size:"3x"}))),n?r.a.createElement(x.a,{icon:y.h,size:"3x",onClick:a}):r.a.createElement(i.b,{className:"link",to:"/login"},r.a.createElement(x.a,{icon:y.j,size:"3x"}))))}),T=function e(){var t=this;Object(o.a)(this,e),this.getAll=function(){return t.service.get("/restaurants").then((function(e){return e.data}))},this.getOne=function(e){return t.service.get("/restaurant/".concat(e)).then((function(e){return e.data}))},this.newRestaurant=function(e,n,a,r,s,c,i,o){return t.service.post("/new",{name:e,neighborhood:n,photograph:a,location:r,image:s,cuisine_type:c,timetable:i,reviews:o}).then((function(e){return e.data}))},this.removeRestaurant=function(e){return t.service.post("/remove",{restaurant:e}).then((function(e){return e.data}))},this.editRestaurant=function(e,n,a,r,s,c,i,o,u){return t.service.post("/edit/".concat(e),{name:n,neighborhood:a,photograph:r,location:s,image:c,cuisine_type:i,timetable:o,reviews:u}).then((function(e){return e.data}))},this.service=g.a.create({baseURL:"".concat("https://wherever-eat-takes.herokuapp.com","/restaurants"),withCredentials:!0})},D=function e(){var t=this;Object(o.a)(this,e),this.updateUserLike=function(e){return t.service.post("/updateLike",{updatedUserObj:e}).then((function(e){return e.data}))},this.removeUserLike=function(e){return t.service.post("/removeLike",{restaurant:e}).then((function(e){return e.data}))},this.service=g.a.create({baseURL:"".concat("https://wherever-eat-takes.herokuapp.com","/likes"),withCredentials:!0})},z=(n(84),function(e){var t,n,s=e.user,c=Object(h.g)().restaurantId,i=new T,o=new D,u=Object(h.f)(),l=Object(a.useState)(s),m=Object(k.a)(l,2),d=m[0],p=m[1],f=Object(a.useState)({}),v=Object(k.a)(f,2),g=v[0],E=v[1],b=Object(a.useState)(!0),w=Object(k.a)(b,2),O=w[0],N=w[1],j=Object(a.useState)(!1),S=Object(k.a)(j,2),U=S[0],C=S[1],_=Object(a.useState)(!1),I=Object(k.a)(_,2),R=I[0],A=I[1],F={},L=[];Object(a.useEffect)((function(){i.getOne(c).then((function(e){E(e),d.likes.includes(e.id)?A(!0):A(!1)})).catch((function(e){return console.log(e)}))}),[]),g.reviews&&(F=g.timetable,L=g.reviews),L.length>0&&(t=L.map((function(e){return Object.keys(e).map((function(t){return"_id"!==t?r.a.createElement("div",{className:t+"-review"},e[t]):null}))}))),F&&(n=r.a.createElement("ul",null,Object.keys(F).map((function(e,t){return r.a.createElement("li",{key:t},r.a.createElement("span",null,e+": "),F[e])}))));return g.image?r.a.createElement("div",{className:"container-details"},r.a.createElement("div",{className:"restaurant-name"},g.name),r.a.createElement("div",{className:"image-restaurant"},r.a.createElement("img",{src:"".concat(g.image),alt:"".concat(g.name)})),r.a.createElement("div",{className:"cuisine restaurant-name"},"Cuisine Type: ",g.cuisine_type),r.a.createElement("div",{className:"timetable restaurant-name",onClick:function(){return N(!O)}},"Timetable"," ",O?r.a.createElement(x.a,{icon:y.d}):r.a.createElement(x.a,{icon:y.c}),O?"":n),r.a.createElement("div",{className:"reviews restaurant-name",onClick:function(){return C(!U)}},"Reviews"," ",U?r.a.createElement(x.a,{icon:y.c}):r.a.createElement(x.a,{icon:y.d})),U?r.a.createElement("div",{className:"review-comments"},t):"",r.a.createElement("div",{className:R?"favourite":"restaurant-like unfavourite",onClick:function(){return function(){if(!s)return u.push("/login");d.likes.includes(g.id)?o.removeUserLike(c).then((function(e){s=e,p(e),A(!1)})).catch((function(e){return console.log(e)})):o.updateUserLike(c).then((function(e){s=e,p(e),A(!0)})).catch((function(e){return console.log(e)}))}()}},R?"Marked as Favourite ":"Do you know it? Mark it as favourite "," ",R?r.a.createElement(x.a,{icon:y.b}):r.a.createElement(x.a,{icon:y.e}))):r.a.createElement("div",{className:"content spinner"},r.a.createElement("div",{className:"lds-hourglass"}))}),H="FETCH_DATA_REQUEST",P="FETCH_DATA_SUCCESS",G="FETCH_DATA_ERROR";function W(){return{type:H}}function X(e){return{type:P,restaurant:e}}function B(e){return{type:G,payload:{error:e}}}var J=new T;n(85);var M=function(e){var t=e.place;return r.a.createElement("div",{className:"grid-photo-wrap flex"},r.a.createElement(i.b,{to:"/restaurant/".concat(t.id),restaurant:t},t.image?r.a.createElement("img",{src:t.image,alt:t.name,className:"grid-photo"}):r.a.createElement("div",null,t.name)))},Q=(n(86),Object(O.b)((function(e){return{restaurants:e.products.restaurants}}))((function(e){var t=e.restaurants;return t[0]?r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"restaurant-grid"},t.map((function(e,t){return r.a.createElement(M,{key:t,place:e})})))):r.a.createElement("div",{className:"content spinner"},r.a.createElement("div",{className:"lds-hourglass"}))}))),$=(n(87),function(e){var t,n=e.restaurants,s=Object(a.useState)(""),c=Object(k.a)(s,2),i=c[0],o=c[1];return t=n.restaurants.filter((function(e){return e.name.toLowerCase().includes(i.toLowerCase())})),r.a.createElement("div",null,r.a.createElement("input",{type:"text",name:"searchbar",placeholder:"Search restaurants",className:"searchbar",onChange:function(e){return o(e.target.value)}}),r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"restaurant-grid"},t.map((function(e,t){return r.a.createElement(M,{key:t,place:e})})))))}),Z=(n(88),function(e){var t,n=e.restaurants,s=e.user,c=Object(a.useState)([]),i=Object(k.a)(c,2),o=i[0],u=i[1];return Object(a.useEffect)((function(){var e=[];s&&n.restaurants.filter((function(t){return s.likes.includes(t.id)?e.push(t):[]})),u(e)}),[]),s||(t=r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"no-user flex"},"Log In to see favourite restaurants."))),s&&o.length>0?t=r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"restaurant-grid"},o.map((function(e,t){return r.a.createElement(M,{key:t,place:e})})))):s&&o.length<=0&&(t=r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"no-user flex"},"No favourite restaurants yet."))),r.a.createElement("div",null,t)}),q=Object(O.b)((function(e){return{restaurants:e.products.restaurants,loading:e.products.loading,error:e.products.error}}))((function(e){var t,n=e.restaurants,s=Object(a.useState)(""),c=Object(k.a)(s,2),i=c[0],o=c[1];return t=n.filter((function(e){return e.name.toLowerCase().includes(i.toLowerCase())})),r.a.createElement("div",{className:"container"},r.a.createElement("input",{type:"text",name:"searchbar",placeholder:"Search restaurants",className:"searchbar",onChange:function(e){return o(e.target.value)}}),r.a.createElement("ul",null,t.map((function(e,t){return r.a.createElement("li",{key:t},e.name)}))))})),K=function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(l.a)(this,Object(m.a)(t).call(this,e))).getUser=function(e){n.setState({loggedInUser:e})},n.logout=function(){n.service.logout().then((function(){n.setState({loggedInUser:null})})).catch((function(e){return console.log(e)}))},n.state={loggedInUser:null},n.service=new E,n.fetchUser(),n}return Object(d.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.props.dispatch((function(e){e(W()),J.getAll().then((function(t){e(X(t))}),(function(t){e(B(t))}))}))}},{key:"fetchUser",value:function(){var e=this;return this.service.loggedin().then((function(t){e.setState({loggedInUser:t})})).catch((function(t){e.setState({loggedInUser:!1})}))}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"App app-container"},r.a.createElement(L,{title:"Wherever Eat Takes",user:this.state.loggedInUser,logout:function(){return e.logout()}}),r.a.createElement("div",{className:"content"},r.a.createElement(h.c,null,r.a.createElement(h.a,{exact:!0,path:"/",render:function(){return r.a.createElement(Q,{restaurants:e.props,getUser:e.getUser})}}),r.a.createElement(h.a,{exact:!0,path:"/signup",render:function(){return r.a.createElement(w,{getUser:e.getUser})}}),r.a.createElement(h.a,{exact:!0,path:"/login",render:function(){return r.a.createElement(j,{getUser:e.getUser})}}),r.a.createElement(h.a,{exact:!0,path:"/restaurant/:restaurantId",render:function(){return r.a.createElement(z,{user:e.state.loggedInUser})}}),r.a.createElement(h.a,{exact:!0,path:"/search",render:function(){return r.a.createElement($,{restaurants:e.props,getUser:e.getUser})}}),r.a.createElement(h.a,{exact:!0,path:"/favourites",render:function(){return r.a.createElement(Z,{restaurants:e.props,user:e.state.loggedInUser})}}),r.a.createElement(h.a,{exact:!0,path:"/edit",render:function(){return r.a.createElement(q,null)}}))))}}]),t}(a.Component),V=Object(O.b)((function(e){return{user:e.products.user,restaurants:e.products.restaurants,loading:e.products.loading,error:e.products.error}}))(K);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Y=n(17),ee=n(51),te={restaurants:[],loading:!1,error:null};var ne=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:te,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_DATA_REQUEST":return Object(p.a)({},e,{loading:!0,error:null});case"FETCH_DATA_SUCCESS":return Object(p.a)({},e,{loading:!1,restaurants:t.restaurant});case"FETCH_DATA_ERROR":return Object(p.a)({},e,{loading:!1,error:t.payload.error,restaurants:[]});default:return e}},ae=JSON.parse(localStorage.getItem("user")),re=ae?{loggedIn:!0,user:ae}:{};var se=Object(Y.c)({authentication:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:re,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"USERS_LOGIN_REQUEST":return{loggingIn:!0,user:t.user};case"USERS_LOGIN_SUCCESS":return{loggedIn:!0,user:t.user};case"USERS_LOGIN_FAILURE":case"USERS_LOGOUT":return{};default:return e}},products:ne}),ce=Object(Y.d)(se,Object(Y.a)(ee.a));c.a.render(r.a.createElement(O.a,{store:ce},r.a.createElement(i.a,null,r.a.createElement(V,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[53,1,2]]]);
//# sourceMappingURL=main.f07b004d.chunk.js.map